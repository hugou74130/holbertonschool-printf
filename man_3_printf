# _PRINTF(3)

## NAME

`_printf` - custom formatted output conversion function

## SYNOPSIS

```
#include "main.h"

int _printf(const char *format, ...);
```

## DESCRIPTION

The `_printf` function is a custom implementation of the standard C library `printf` function. It produces output according to a format string that can contain format specifiers.

The `_printf` function writes formatted output to the standard output stream (stdout). It processes the format string character by character, recognizing conversion specifiers that begin with a percent sign (`%`) and replacing them with the corresponding argument values.

### Supported Conversion Specifiers

The following conversion specifiers are supported:

* **`%c`** – Print a single character
  - Takes an integer argument and outputs the corresponding character

* **`%s`** – Print a null-terminated string
  - Takes a pointer to a character string and outputs all characters until the null terminator
  - If the pointer is NULL, outputs the string "(null)"

* **`%d`** – Print a signed integer in decimal format
  - Takes an integer argument and outputs it in base 10
  - Supports negative numbers with a minus sign prefix

* **`%i`** – Print a signed integer in decimal format
  - Identical to `%d` specifier
  - Takes an integer argument and outputs it in base 10

* **`%%`** – Print a literal percent sign
  - Outputs a single percent character (%)
  - Does not consume any arguments

### Unsupported Features

The following features are **not** supported in this implementation:

- Flag characters (-, +, 0, space, #)
- Field width specifications
- Precision specifications
- Length modifiers (h, l, L)
- Conversion specifiers other than those listed above

## LIBRARIES USED

The `_printf` function utilizes the following standard C libraries:

### 1. `<stdarg.h>`

**Purpose:** Provides macros for handling variable arguments (variadic functions)

**Macros used:**
- `va_list` – Type for storing variable argument information
- `va_start(ap, last)` – Initializes the va_list to point to the first variable argument
- `va_arg(ap, type)` – Retrieves the next argument of the specified type from the variable argument list
- `va_end(ap)` – Cleans up the va_list after processing all arguments

**Example in _printf:**
```c
va_list args;
va_start(args, format);      /* Start processing arguments after 'format' */
int value = va_arg(args, int); /* Get next argument as int */
va_end(args);                /* Clean up */
```

### 2. `<unistd.h>`

**Purpose:** Provides access to POSIX operating system API, particularly the `write()` system call

**Functions used:**
- `write(int fd, const void *buf, size_t count)` – Writes data to a file descriptor

**Parameters:**
- `fd = 1` – File descriptor for stdout (standard output)
- `buf` – Pointer to the data to write (in this case, a character)
- `count = 1` – Number of bytes to write (1 byte for a single character)

**Return value:** Returns the number of bytes written (1 on success, -1 on error)

**Example in _putchar:**
```c
int _putchar(char c)
{
    return (write(1, &c, 1));  /* Write 1 byte to stdout */
}
```

### 3. `<stdlib.h>`

**Purpose:** Provides general utility functions from the C standard library

**Functions potentially used:**
- `malloc()` – Allocates memory dynamically
- `free()` – Deallocates previously allocated memory
- Other general utilities

**Note:** In this implementation, `stdlib.h` is included for completeness, though explicit memory allocation/deallocation may not be heavily used in the core functions.

## HOW THE LIBRARIES WORK TOGETHER

```
User calls _printf("Hello %s, %d\n", "World", 42)
    ↓
_printf uses stdarg.h to:
    - Initialize va_list with va_start()
    - Extract arguments with va_arg()
    ↓
For each character in format string:
    - If regular character: call _putchar()
    - If %specifier: call appropriate print_* function
    ↓
print_* functions use stdarg.h to:
    - Retrieve the argument value via va_arg()
    ↓
All functions use unistd.h to:
    - Call write(1, ...) to output to stdout
    ↓
Output appears on screen
```

## RETURN VALUE

The `_printf` function returns the total number of characters successfully printed to stdout. This count includes all characters from the format string and converted arguments, but excludes the null terminator.

If an error occurs, the function returns -1.

## EXAMPLES

### Basic Usage

Print a simple string:
```c
#include "main.h"

int main(void)
{
    _printf("Hello, World!\n");
    return (0);
}
```

Print a character:
```c
_printf("Character: %c\n", 'A');
```
Output: `Character: A`

### Using Multiple Specifiers

```c
_printf("Hello %s, number: %d\n", "World", 42);
```
Output: `Hello World, number: 42`

### Negative Numbers

```c
_printf("Temperature: %d degrees\n", -15);
```
Output: `Temperature: -15 degrees`

### Using %i Specifier

```c
_printf("Value: %i\n", 100);
```
Output: `Value: 100`

### Printing Percent Signs

```c
_printf("Progress: 50%%\n");
```
Output: `Progress: 50%`

### Handling NULL Strings

```c
_printf("String pointer: %s\n", NULL);
```
Output: `String pointer: (null)`

### Combining Multiple Specifiers

```c
int count;
count = _printf("Name: %s, Age: %d, Grade: %c\n", "Alice", 25, 'A');
printf("Characters printed: %d\n", count);
```
Output:
```
Name: Alice, Age: 25, Grade: A
Characters printed: 38
```

## NOTES

- The function writes directly to stdout without buffering customization
- The return value includes all characters printed, including newlines and special characters
- Non-recognized conversion specifiers (format specifiers not in the supported list) are printed as-is with the preceding `%` character
- The format string itself must be a valid null-terminated string
- The `<stdarg.h>` library is essential for handling variable number of arguments
- The `<unistd.h>` library provides low-level I/O operations via the `write()` system call

## SEE ALSO

`printf(3)` - standard C library formatted output function

`man printf` - manual page for standard printf

`man 2 write` - manual page for the write system call

`man 3 stdarg` - manual page for variable argument lists

## AUTHORS

- hugou74130 - Main implementation and architecture
- SaraEstelle - Collaboration and testing

## HISTORY

This man page documents the custom `_printf` implementation developed for the Holbertonschool project, November 2025.

---

**Man Page Version:** 1.1
**Last Updated:** November 2025
